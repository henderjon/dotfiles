#!/usr/bin/env sh

# we're looking for an exis status so don't barf
# set -e

# this might not be stricly neccessary but it's a good check to have before you start moving things around
if ! git diff --quiet ; then
	echo 'dirty working directory'
	exit 1
fi

set -e

# git rev-parse --abbrev-ref HEAD
BRANCH_NAME=$(git branch --show-current)
if [ -n "$1" ]; then
	BRANCH_NAME=$1
fi

git branch --move "$BRANCH_NAME" "archive/$BRANCH_NAME"
printf "\n\nrenamed branch \"\033[4marchive/%s\033[0m\" \n" "$BRANCH_NAME"

####################################################################### notes ##
# remarkablemark.org/blog/2017/10/12/check-git-dirty/

# if [[ $(git diff --stat) != '' ]]; then
#   echo 'dirty'
# else
#   echo 'clean'
# fi

# [[ -n $(git status -s) ]] && echo 'modified and/or untracked'

# [[ -z $(git status -s) ]] && echo 'clean'

# [[ -z $(git diff --quiet) ]] && echo 'clean'

# git diff --quiet || echo 'dirty'


# BRANCH_NAME=$(git branch --show-current); if [ -n "$1" ]; then BRANCH_NAME=$1; fi; git branch --move "$BRANCH_NAME" "archive/$BRANCH_NAME"
